## 操作系统

### 进程与线程

#### 进程

进程是资源分配的基本单位

进程控制块（PCB）描述进程的基本信息和运行状态，创建进程和撤销进程都是对PCB操作

#### 线程

线程是独立调度的基本单位

一个进程中可以有多个线程，他们共享进程资源

#### 区别

* **拥有资源**

  进程是资源分配的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源

* **调度**

  线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换

* **系统开销**

  创建和撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O设备等，所付出的开销远大于创建和撤销线程时的开销

* **通信方面**

  线程间可以通过直接读写同一进程中的数据进行通信；进程通信需要借助IPC

### 进程状态的切换

<img src="https://raw.githubusercontent.com/whn961227/images/master/data/20200708173925.png" style="zoom: 25%;" />

* **就绪状态**（ready）：等待被调度
* **运行状态**（running）
* **阻塞状态**（waiting）：等待资源

> 只有就绪态和运行态可以相互转换，其他的都是单向转换。就绪态的进程通过调度算法从而获得CPU时间，转为运行态；运行态的进程，在分配给它的CPU时间片用完之后转为就绪态，等待下一次调度

>阻塞态是缺少需要的资源从而由运行态转换而来，资源不包括CPU时间

### 进程调度算法

#### 批处理系统

* 先来先服务（FCFS）
* 短作业优先（SJF）
* 最短剩余时间优先（SRTN）

#### 交互式系统

* 时间片轮转
* 优先级调度
* 多级反馈队列

#### 实时系统

* 硬实时
* 软实时

### 进程通信

#### 管道

通过调用pipe函数创建，fd[0]用于读，fd[1]用于写

**具有以下限制**：

* 只支持半双工通信（单向交替传输）
* 只能在父子进程或者兄弟进程中使用

<img src="https://raw.githubusercontent.com/whn961227/images/master/data/20200708175232.png" style="zoom:25%;" />

#### FIFIO（命名管道）

去除了管道只能在父子进程中使用的限制

常用于客户-服务器应用程序中，FIFO用作汇聚点，在客户进程和服务器进程之间传递数据

<img src="https://raw.githubusercontent.com/whn961227/images/master/data/20200708175311.png" style="zoom:25%;" />

#### 消息队列

相比于FIFO，消息队列具有以下优点：

* 消息队列可以独立于读写进程存在，从而避免了FIFO中同步管道的打开和关闭时可能产生的困难
* 避免了FIFO的同步阻塞问题，不需要进程自己提供同步方法
* 读进程可以根据消息类型有选择地接收消息，而不像FIFO那样只能默认地接收

#### 信号量

是一个计数器，用于为多个进程提供对共享数据对象的访问